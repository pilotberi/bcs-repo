/*
	Generated By : Steps Code Generator.
	Version : 2024
	Generated On : Fri Feb 13 2026 12:05:18 GMT+0530 (India Standard Time)
	Description : Delete Service Interface for utilizationPoint
	WARNING : DO NOT MODIFY THE GENERATED INTERFACE METHOD NAME OR ARGUMENTS
*/

//Use the following global objects as required.
//dsclientUtil - For data service related actions.
//Strings - For Strings dictionary. refer ../common/strings.js
//appcommon - For common help utils. refer ../common/common.js

var app = require('app');

var TenantDeleteUtilizationPointInterface = app.getTenantWSInterface('BCSFuel', 'utilizationpoint/delete');

if (typeof TenantDeleteUtilizationPointInterface === 'undefined')
	TenantDeleteUtilizationPointInterface = {};

module.exports = {
	onLoad: function(params) {
		var rObj = {
			"override": false,
			"params": params,
		};


		if (TenantDeleteUtilizationPointInterface && TenantDeleteUtilizationPointInterface.onLoad) {
			rObj = TenantDeleteUtilizationPointInterface.onLoad(params);
		}
		return rObj;
	},

	beforeData: function(params) {
		var rObj = {
			"override": false,
			"params": params,
		};


		if (params && params.id){
			try{
				params.id = JSON.parse(params.id);
			}catch(e){
				params.id = params.id;
			}


			var utilQuery = {
				"cols": ["master_name","master_data"],
				"filter": [
					{  
						"col": "master_name",
						"op": "=",
						"val": "bcsfuel_utilizationPoint" 
					}
				] 
			};

			var utilResp = dsclientUtil.execute(utilQuery, "BCSFuel", "bcsfuel_combined_master", "query");
			if (utilResp && utilResp.code === 200 && utilResp.data.length > 0) {
				var vData = JSON.parse(utilResp.data[0].master_data);

				for (var v = 0; v < vData.length; v++) {
					if (params.id == vData[v].utilization_point) {
						rObj.override = true;
						rObj.resp = {
							"code" : 400,
							"msg" : Strings.FOREGIN_REFERENCE_FOUND,
							"err_code" : 422 		//422 -foreign key constraint fails
						};
					}
				}
			}
		}



		if (TenantDeleteUtilizationPointInterface && TenantDeleteUtilizationPointInterface.beforeData) {
			rObj = TenantDeleteUtilizationPointInterface.beforeData(params);
		}
		return rObj;
	},

	beforeExecute: function(queryParams) {
		//custom code here

		if (TenantDeleteUtilizationPointInterface && TenantDeleteUtilizationPointInterface.beforeExecute) {
			queryParams = TenantDeleteUtilizationPointInterface.beforeExecute(queryParams);
		}
		return queryParams;
	},

	afterData: function(respObj) {


		if (TenantDeleteUtilizationPointInterface && TenantDeleteUtilizationPointInterface.afterData) {
			deleteUtilizationPointData = TenantDeleteUtilizationPointInterface.afterData(deleteUtilizationPointData);
		}
		return respObj;
	},

	onError: function(errorObj) {

		if (TenantDeleteUtilizationPointInterface && TenantDeleteUtilizationPointInterface.onError) {
			errorObj = TenantDeleteUtilizationPointInterface.onError(errorObj);
		}
		return errorObj;
	}
};