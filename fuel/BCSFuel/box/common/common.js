/*
    Generated BY    : Steps Code Generator
    Generated On    : Mon Jan 26 2026 17:13:31 GMT+0530 (India Standard Time)
    Description     : WS Common Utilities Library for BCSFuel
    Version         : 2024.09

    WARNING         : DO NOT EDIT THIS FILE. This file is generated, any changes may be overwritten.
*/


module.exports = {
  USER_LANG: "EN",

  getParams: function(queryStr) {
    var paramsObj = {};
    if (queryStr.indexOf("=") == -1) {
      return paramsObj;
    }
    var params = queryStr.split("&");
    for (var paramIdx = 0; paramIdx < params.length; paramIdx++) {
      var param = params[paramIdx].split("=");
      if (param[1]) {
        param[1] = param[1].replace(new RegExp("\\+", "g"), ' ');
        paramsObj[param[0]] = decodeURIComponent(param[1]);
      }
    }
    return paramsObj;
  },

  processParams: function(request) {
    var params = (request.query.length > 0) ? this.getParams(request.query) : {};
    var cType = request.headers["content-type"];

    if (!cType)
      cType = "application/x-www-form-urlencoded";

    var bParams = {};
    if (cType.indexOf("application/json") === 0)
      bParams = {
        data: request.body
      }
    else if (cType.indexOf("application/x-www-form-urlencoded") === 0)
      bParams = this.getParams(request.body);
    else if (cType.indexOf("multipart/form-data") === 0)
      bParams = {};
    else
      bParams = {
        data: request.body
      };

    for (param in bParams) {
      params[param] = bParams[param];
    }
    return params;
  },

  initLanguage: function(lang, langFolder) {
    try {
      lang = lang ? lang.toUpperCase() : this.USER_LANG;
      if (lang.length > 0 && lang !== "EN") {
        var fs = require("fs");
        var filePath = langFolder + lang + ".json";
        var langFile = fs.readText(fs.BOX, filePath);
        if (langFile) {
          var langJson = JSON.parse(langFile);
          for (var key in langJson) {
            if (Strings[key])
              Strings[key] = langJson[key];
          }
        }
      }
    } catch (e) {
      console.error("Error during language init: " + e.stack);
    }
  },
};