/*
    Generated BY    : Steps Code Generator
    Generated On    : Mon Jan 26 2026 17:13:32 GMT+0530 (India Standard Time)
    Description     : SDialog Library for BCSFuel
    Version         : 2024.09

    WARNING         : DO NOT EDIT THIS FILE. This file is generated, any changes may be overwritten.
*/


var SDialog = function(id, options) {
  this.dialogs = null;
  this.id = id;
  this.options = options;
  this.dObj = null;
  this.dlg = null;
  this.dlgHeader = null;
  this.dlgBody = null;
  this.dlgFooter = null;

  this.show = function() {
    this.dObj.show();
  }

  this.hide = function() {
    this.dObj.hide();
  }

  this.toggle = function() {
    this.dObj.toggle();
  }

  this.handleUpdate = function() {
    this.dObj.handleUpdate();
  }

  this.onShow = function(sdlg) {
    return function(e) {
      if (sdlg.options.onShow) {
        sdlg.options.onShow.call(sdlg, e);
      };
    }
  }

  this.onShown = function(sdlg) {
    return function(e) {
      if (sdlg.options.left === true || sdlg.options.right === true)
        sdlg.dlg.classList.add('in');

      if (sdlg.options.onShown) {
        sdlg.options.onShown.call(sdlg, e);
      }
    };
  }

  this.onHide = function(sdlg) {
    return function(e) {
      if (sdlg.options.left === true || sdlg.options.right === true)
        sdlg.dlg.classList.remove('in');

      if (sdlg.options.onHide) {
        sdlg.options.onHide.call(sdlg, e);
      }
    };
  }

  this.onHidden = function(sdlg) {
    return function(e) {
      if (sdlg.options.onHidden) {
        sdlg.options.onHidden.call(sdlg, e);
      }
    };
  }

  this.onHidePrevented = function(sdlg) {
    return function(e) {
      if (sdlg.options.onHidePrevented) {
        sdlg.options.onHidePrevented.call(sdlg, e);
      }
    };
  }

  this.addHeader = function(dlgContent) {
    if (typeof(this.options.header) === "undefined")
      this.options.header = true;

    if (this.options.header) {
      var dlgHeader = document.createElement('div');
      dlgHeader.classList.add('modal-header');
      dlgContent.appendChild(dlgHeader);
      this.dlgHeader = dlgHeader;

      if (!this.options.title)
        this.options.title = "";

      var title = document.createElement('h5');
      title.classList.add('modal-title');
      title.innerHTML = this.options.title;
      dlgHeader.appendChild(title);

      var closeBtn = document.createElement('button');
      closeBtn.classList.add('btn-close');
      closeBtn.setAttribute('type', 'button');
      closeBtn.setAttribute('data-bs-dismiss', 'modal');
      closeBtn.setAttribute('aria-label', 'Close');
      dlgHeader.appendChild(closeBtn);
    }
  }

  this.addBody = function(dlgContent) {
    var dlgBody = document.createElement('div');
    dlgBody.classList.add('modal-body');
    dlgContent.appendChild(dlgBody);
    this.dlgBody = dlgBody;
  }

  this.addFooter = function(dlgContent) {
    if (typeof(this.options.header) != "undefined")
      this.options.footer = true;

    if (this.options.footer) {
      var dlgFooter = document.createElement('div');
      dlgFooter.classList.add('modal-footer');
      dlgContent.appendChild(dlgFooter);
      this.dlgFooter = dlgFooter;

      if (this.options.buttons && this.options.buttons.length > 0) {
        for (var bIdx = 0; bIdx < this.options.buttons.length; bIdx++) {
          var btnObj = this.options.buttons[bIdx];
          var btn = document.createElement('button');
          if (!btnObj.classList)
            btnObj.classList = 'btn btn-primary';
          btn.className = btnObj.classList;

          if (btnObj.attributes) {
            for (var attr in btnObj.attributes) {
              btn.setAttribute(attr, btnObj.attributes[attr]);
            }
          }
          if (!btnObj.label)
            btnObj.label = "OK";
          btn.innerHTML = btnObj.label;
          dlgFooter.appendChild(btn);
          if (btnObj.handler) {
            btn.addEventListener('click', btnObj.handler);
          }
        }
      } else {
        var btn = document.createElement('button');
        btn.className = 'btn btn-primary';
        btn.setAttribute('type', 'button');
        btn.setAttribute('data-bs-dismiss', 'modal');
        btn.innerText = "OK";
        dlgFooter.appendChild(btn);
      }
    }
  }

  this.build = function() {
    if (!this.id)
      return;
    if (!this.options)
      this.options = {};

    var dlg = document.getElementById(this.id);
    if (dlg)
      dlg.remove();

    dlg = document.createElement('div');
    dlg.classList.add('modal');

    if (this.options.left && this.options.left === true) {
      dlg.classList.add('left');
    } else if (this.options.right && this.options.right === true) {
      dlg.classList.add('right');
    }

    dlg.setAttribute('tabindex', '-1');
    dlg.setAttribute('id', this.id);

    if (!this.options.animation)
      this.options.animation = 'fade';
    dlg.classList.add(this.options.animation);

    this.dlg = dlg;
    this.dialogs.appendChild(dlg);

    this.dlg.addEventListener('show.bs.modal', this.onShow(this));
    this.dlg.addEventListener('shown.bs.modal', this.onShown(this));
    this.dlg.addEventListener('hide.bs.modal', this.onHide(this));
    this.dlg.addEventListener('hidden.bs.modal', this.onHidden(this));
    this.dlg.addEventListener('hidePrevented.bs.modal', this.onHidePrevented(this));

    var dlgModal = document.createElement('div');
    dlgModal.classList.add('modal-dialog');

    if (this.options.scrollable && this.options.scrollable === true)
      dlgModal.classList.add('modal-dialog-scrollable');

    if (!this.options.right === true && !this.options.left === true && this.options.centered && this.options.centered === true)
      dlgModal.classList.add('modal-dialog-centered');

    if (this.options.size) {
      switch (this.options.size) {
        case 'small':
          dlgModal.classList.add('modal-sm');
          break;
        case 'large':
          dlgModal.classList.add('modal-lg');
          break;
        case 'xlarge':
          dlgModal.classList.add('modal-xl');
          break;
      }
    }

    if (this.options.fullscreen && this.options.fullscreen === true)
      dlgModal.classList.add('modal-fullscreen');

    this.dlg.appendChild(dlgModal);

    var dlgContent = document.createElement('div');
    dlgContent.classList.add('modal-content');
    dlgModal.appendChild(dlgContent);

    this.addHeader(dlgContent);
    this.addBody(dlgContent);
    this.addFooter(dlgContent);
  }

  this.init = function() {
    var dlgs = document.getElementById('sdialogs');
    if (!dlgs) {
      dlgs = document.createElement('div');
      dlgs.setAttribute('id', 'sdialogs');
      dlgs.classList.add("dialogs");
      document.body.appendChild(dlgs);
    }
    this.dialogs = dlgs;
    this.build();

    var options = {};
    if (typeof(this.options.backdrop) === "undefined")
      options.backdrop = true;
    else
      options.backdrop = this.options.backdrop;

    if (typeof(this.options.keyboard) === "undefined")
      options.keyboard = true;
    else
      options.keyboard = this.options.keyboard;

    if (typeof(this.options.focus) === "undefined")
      options.focus = true;
    else
      options.focus = this.options.focus;

    this.dObj = new bootstrap.Modal(this.dlg, options);

  }

  this.init();
}

window.s_toast = function(msg, type, options) {
  var id = 'stoast' + Math.floor(Math.random() * 100);
  var options = {};
  options.backdrop = false;
  options.title = msg;
  options.onHidden = function(e) {
    this.dlg.remove();
    delete this;
  };
  var stoast = new SDialog(id, options);
  stoast.dlg.classList.add('stoast');
  stoast.dlgBody.remove();
  stoast.dlgFooter.remove();

  switch (type) {
    case 'success':
      stoast.dlgHeader.classList.add('text-white');
      stoast.dlgHeader.classList.add('bg-success');
      break;
    case 'warn':
      stoast.dlgHeader.classList.add('bg-warning');
      stoast.dlgHeader.classList.remove('text-white');
      stoast.dlgHeader.classList.add('text-dark');
      break;
    case 'error':
      stoast.dlgHeader.classList.add('text-white');
      stoast.dlgHeader.classList.add('bg-danger');
      break;
    case 'info':
      stoast.dlgHeader.classList.add('bg-info');
      stoast.dlgHeader.classList.add('text-dark');
      break;
    default:
      stoast.dlgHeader.classList.add('text-secondary');
      stoast.dlgHeader.classList.add('bg-light');
      break;
  }
  if (!options.timeout)
    options.timeout = 2000;

  stoast.show();

  setTimeout(function(stoast) {
    return function() {
      stoast.hide.call(stoast);
    }
  }(stoast), options.timeout);
}

window.s_alert = function(title, msg, type, options) {
  var id = 'salert' + Math.floor(Math.random() * 100);
  if (!options)
    options = {};
  options.title = title;
  options.type = type;
  options.onHidden = function(e) {
    if (this.options.type === 'confirm') {
      var pressedBtn = this.dlgFooter.querySelector('button[pressed]');
      if (!pressedBtn && this.options.onNo) {
        this.options.onNo.call(this);
      }
    } else if (this.options.type === 'prompt') {
      var pressedBtn = this.dlgFooter.querySelector('button[pressed]');
      if (!pressedBtn && this.options.onPrompt)
        this.options.onPrompt.call(this, null);
    }
    this.dlg.remove();
    delete this;
  };

  if (type === 'confirm') {
    options.buttons = [{
        label: "No",
        handler: function(noHandler) {
          return function(e) {
            this.setAttribute("pressed", true);
            if (noHandler)
              noHandler.call(this, e);
          }
        }(options.onNo),
        attributes: {
          "data-bs-dismiss": "modal"
        }
      },
      {
        label: "Yes",
        handler: function(yesHandler) {
          return function(e) {
            this.setAttribute("pressed", true);
            if (yesHandler)
              yesHandler.call(this, e);
          }
        }(options.onYes),
        attributes: {
          "data-bs-dismiss": "modal"
        }
      }
    ];
  } else if (type === 'prompt') {
    var inputId = id + "_pinput";
    options.buttons = [{
        label: "Cancel",
        handler: function(inputId, onPrompt) {
          return function(e) {
            this.setAttribute("pressed", "cancel");
            if (onPrompt)
              onPrompt.call(this, null);
          }
        }(inputId, options.onPrompt),
        attributes: {
          "data-bs-dismiss": "modal"
        }
      },
      {
        label: "OK",
        handler: function(inputId, onPrompt) {
          return function(e) {
            this.setAttribute("pressed", "ok");
            if (onPrompt)
              onPrompt.call(this, document.getElementById(inputId).value);
          }
        }(inputId, options.onPrompt),
        attributes: {
          "data-bs-dismiss": "modal"
        }
      }
    ];
  }

  var salert = new SDialog(id, options);

  var okBtn = salert.dlgFooter.querySelectorAll('.btn.btn-primary')[0];

  salert.dlgHeader.classList.add('text-white');
  switch (type) {
    case 'success':
      salert.dlgHeader.classList.add('bg-success');
      okBtn.classList.remove('btn-primary');
      okBtn.classList.add('btn-light');
      break;
    case 'warn':
      salert.dlgHeader.classList.add('bg-warning');
      salert.dlgHeader.classList.remove('text-white');
      salert.dlgHeader.classList.add('text-dark');
      okBtn.classList.remove('btn-primary');
      okBtn.classList.add('btn-light');
      break;
    case 'error':
      salert.dlgHeader.classList.add('bg-danger');
      okBtn.classList.remove('btn-primary');
      okBtn.classList.add('btn-light');
      break;
    case 'info':
    case 'confirm':
    default:
      salert.dlgHeader.classList.add('bg-primary');
      break;
  }

  if (type === 'prompt') {
    var inputId = id + "_pinput";
    var pLbl = document.createElement('label');
    pLbl.classList.add('form-label');
    pLbl.setAttribute('for', inputId);
    pLbl.innerHTML = msg;

    var pInput = document.createElement('input');
    pInput.setAttribute('type', 'text');
    pInput.setAttribute('id', id + "_pinput");
    pInput.classList.add('form-control');
    salert.prompt = pInput;

    salert.dlgBody.appendChild(pLbl);
    salert.dlgBody.appendChild(pInput);
  } else {
    salert.dlgBody.innerHTML = "<p>" + msg + "</p>";
  }

  salert.show();
}

window.s_warn = function(title, msg, options) {
  window.s_alert(title, msg, 'warn', options);
}

window.s_error = function(title, msg, options) {
  window.s_alert(title, msg, 'error', options);
}

window.s_success = function(title, msg, options) {
  window.s_alert(title, msg, 'success', options);
}

window.s_info = function(title, msg, options) {
  window.s_alert(title, msg, 'info', options);
}

window.s_confirm = function(title, msg, options) {
  window.s_alert(title, msg, 'confirm', options);
}

window.s_prompt = function(title, msg, options) {
  window.s_alert(title, msg, 'prompt', options);
}

window.s_dialog = function(id, title, body, buttons, options) {
  if (!options)
    options = {};
  options.title = title;
  options.buttons = buttons;
  var sDlg = new SDialog(id, options);
  sDlg.dlgHeader.classList.add('bg-primary');
  sDlg.dlgHeader.classList.add('text-white');

  sDlg.dlgBody.innerHTML = "";
  sDlg.dlgBody.appendChild(body);

  return sDlg;
}