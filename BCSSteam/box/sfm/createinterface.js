/*
	Generated By : Steps Code Generator.
	Version : 2024
	Generated On : Mon Jan 05 2026 15:50:46 GMT+0530 (India Standard Time)
	Description : Create Service Interface for sfm
	WARNING : DO NOT MODIFY THE GENERATED INTERFACE METHOD NAME OR ARGUMENTS
*/

//Use the following global objects as required.
//dsclientUtil - For data service related actions.
//Strings - For Strings dictionary. refer ../common/strings.js
//appcommon - For common help utils. refer ../common/common.js

var app = require('app');

var TenantCreateSfmInterface = app.getTenantWSInterface('BCSSteam', 'sfm/create');

if (typeof TenantCreateSfmInterface === 'undefined')
	TenantCreateSfmInterface = {};


module.exports = {
	onLoad: function(params) {
		var rObj = {
			"override": false,
			"params": params,
		};


		if (TenantCreateSfmInterface && TenantCreateSfmInterface.onLoad) {
			rObj = TenantCreateSfmInterface.onLoad(params);
		}
		return rObj;
	},

	beforeData: function(params) {
		var rObj = {
			"override": false,
			"params": params,
		};

		if (params && params.data){
			try{
				params.data = JSON.parse(params.data);
			}catch(e){
				params.data = params.data;
			}

			var getAllSfmRespObj = dsclientUtil.execute({}, "BCSSteam", "BCSSteam_sfm", "getAll");

			if(getAllSfmRespObj.code == 200 && getAllSfmRespObj.data){
				for(var idx = 0; idx < getAllSfmRespObj.data.length; idx++){
					if(appcommon.normalizeString(params.data.sfm_code) === appcommon.normalizeString(getAllSfmRespObj.data[idx].sfm_code)){
						rObj.override = true;
						rObj.resp = {
							"code" : 400,
							"msg" : Strings.DUPLICATE_FOUND,
							"err_code" : 409 		//duplicate sfm code
						};
					}
				}
			}else{
				rObj.override = true;
				rObj.resp = {
					"code" : 400,
					"msg" : Strings.CREATE_BCSSTEAM_SFM_ERROR
				}
			}
		}

		params.data = JSON.stringify(params.data);


		if (TenantCreateSfmInterface && TenantCreateSfmInterface.beforeData) {
			rObj = TenantCreateSfmInterface.beforeData(params);
		}
		return rObj;
	},

	beforeExecute: function(queryParams) {
		//custom code here

		if (TenantCreateSfmInterface && TenantCreateSfmInterface.beforeExecute) {
			queryParams = TenantCreateSfmInterface.beforeExecute(queryParams);
		}
		return queryParams;
	},


	afterData: function(createSfmData) {


		if (TenantCreateSfmInterface && TenantCreateSfmInterface.afterData) {
			createSfmData = TenantCreateSfmInterface.afterData(createSfmData);
		}
		return createSfmData;
	},

	onError: function(errorObj) {


		if (TenantCreateSfmInterface && TenantCreateSfmInterface.onError) {
			errorObj = TenantCreateSfmInterface.onError(errorObj);
		}
		return errorObj;
	}
};