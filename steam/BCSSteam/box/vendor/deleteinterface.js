/*
	Generated By : Steps Code Generator.
	Version : 2024
	Generated On : Mon Jan 05 2026 15:24:09 GMT+0530 (India Standard Time)
	Description : Delete Service Interface for vendor
	WARNING : DO NOT MODIFY THE GENERATED INTERFACE METHOD NAME OR ARGUMENTS
*/

//Use the following global objects as required.
//dsclientUtil - For data service related actions.
//Strings - For Strings dictionary. refer ../common/strings.js
//appcommon - For common help utils. refer ../common/common.js

var app = require('app');

var TenantDeleteVendorInterface = app.getTenantWSInterface('BCSSteam', 'vendor/delete');

if (typeof TenantDeleteVendorInterface === 'undefined')
	TenantDeleteVendorInterface = {};

module.exports = {
	onLoad: function(params) {
		var rObj = {
			"override": false,
			"params": params,
		};


		if (TenantDeleteVendorInterface && TenantDeleteVendorInterface.onLoad) {
			rObj = TenantDeleteVendorInterface.onLoad(params);
		}
		return rObj;
	},

	beforeData: function(params) {
		var rObj = {
			"override": false,
			"params": params,
		};


		if (params && params.id){
			try{
				params.id = JSON.parse(params.id);
			}catch(e){
				params.id = params.id;
			}

			var getBySfmByVendors = {};
			getBySfmByVendors.cols = [
				"sfm_code",
				"sfm_description",
				"vendor_id",
				"model_no",
				"serial_no",
				"year_of_manufacturing",
				"working_principle_id",
				"size_id",
				"flow_rate_min",
				"flow_rate_max",
				"input_power_id",
				"output_signal_id",
				"connected_tnpcb",
				"tnpcb_ref",
				"connected_cpcb",
				"cpcb_ref",
				"remarks",
				"created_by",
				"created_on",
				"modified_by",
				"modified_on"
			]

			getBySfmByVendors.filter = [];
			getBySfmByVendors.filter.push({
				"col": "vendor_id",
				"op": "=",
				"val": params.id
			});

			var sfmRespObj = dsclientUtil.execute(getBySfmByVendors, "BCSSteam", "BCSSteam_sfm", "query");
			var sfmObjArr = sfmRespObj.data;

			if(sfmRespObj.code == 200 && sfmObjArr && sfmObjArr.length > 0){

				rObj.override = true;
				rObj.resp = {
					"code" : 400,
					"msg" : Strings.FOREGIN_REFERENCE_FOUND,
					"err_code" : 422 		//422 -foreign key constraint fails
				};

			}


		}

		if (TenantDeleteVendorInterface && TenantDeleteVendorInterface.beforeData) {
			rObj = TenantDeleteVendorInterface.beforeData(params);
		}
		return rObj;
	},

	beforeExecute: function(queryParams) {
		//custom code here

		if (TenantDeleteVendorInterface && TenantDeleteVendorInterface.beforeExecute) {
			queryParams = TenantDeleteVendorInterface.beforeExecute(queryParams);
		}
		return queryParams;
	},

	afterData: function(respObj) {


		if (TenantDeleteVendorInterface && TenantDeleteVendorInterface.afterData) {
			deleteVendorData = TenantDeleteVendorInterface.afterData(deleteVendorData);
		}
		return respObj;
	},

	onError: function(errorObj) {

		if (TenantDeleteVendorInterface && TenantDeleteVendorInterface.onError) {
			errorObj = TenantDeleteVendorInterface.onError(errorObj);
		}
		return errorObj;
	}
};