/*
	Generated By : Steps Code Generator.
	Version : 2024
	Generated On : Mon Jan 05 2026 15:54:16 GMT+0530 (India Standard Time)
	Description : Delete Service Interface for sfm
	WARNING : DO NOT MODIFY THE GENERATED INTERFACE METHOD NAME OR ARGUMENTS
*/

//Use the following global objects as required.
//dsclientUtil - For data service related actions.
//Strings - For Strings dictionary. refer ../common/strings.js
//appcommon - For common help utils. refer ../common/common.js

var app = require('app');

var TenantDeleteSfmInterface = app.getTenantWSInterface('BCSSteam', 'sfm/delete');

if (typeof TenantDeleteSfmInterface === 'undefined')
	TenantDeleteSfmInterface = {};

module.exports = {
	onLoad: function(params) {
		var rObj = {
			"override": false,
			"params": params,
		};


		if (TenantDeleteSfmInterface && TenantDeleteSfmInterface.onLoad) {
			rObj = TenantDeleteSfmInterface.onLoad(params);
		}
		return rObj;
	},

	beforeData: function(params) {
		var rObj = {
			"override": false,
			"params": params,
		};

		if (params && params.id){
			try{
				params.id = JSON.parse(params.id);
			}catch(e){
				params.id = params.id;
			}

			//if(params.data._sid){
				var getByUtilityBySfm = {};
				getByUtilityBySfm.cols = [
					"sfm_code_id",
					"value",
					"reason",
					"record_date",
					"remarks",
					"created_by",
					"created_on",
					"modified_by",
					"modified_on"
				];

				getByUtilityBySfm.filter = [];
				getByUtilityBySfm.filter.push({
					"col": "sfm_code_id",
					"op": "=",
					"val": params.id
				});


				var utilityRespObj = dsclientUtil.execute(getByUtilityBySfm, "BCSSteam", "BCSSteam_utility", "query");
				var utilityObjArr = utilityRespObj.data;

				if(utilityRespObj.code == 200 && utilityObjArr && utilityObjArr.length > 0){

					rObj.override = true;
					rObj.resp = {
						"code" : 400,
						"msg" : Strings.FOREGIN_REFERENCE_FOUND,
						"err_code" : 422 		//422 -foreign key constraint fails
					};

				}
			//}
		}


		if (TenantDeleteSfmInterface && TenantDeleteSfmInterface.beforeData) {
			rObj = TenantDeleteSfmInterface.beforeData(params);
		}
		return rObj;
	},

	beforeExecute: function(queryParams) {
		//custom code here

		if (TenantDeleteSfmInterface && TenantDeleteSfmInterface.beforeExecute) {
			queryParams = TenantDeleteSfmInterface.beforeExecute(queryParams);
		}
		return queryParams;
	},

	afterData: function(respObj) {


		if (TenantDeleteSfmInterface && TenantDeleteSfmInterface.afterData) {
			deleteSfmData = TenantDeleteSfmInterface.afterData(deleteSfmData);
		}
		return respObj;
	},

	onError: function(errorObj) {

		if (TenantDeleteSfmInterface && TenantDeleteSfmInterface.onError) {
			errorObj = TenantDeleteSfmInterface.onError(errorObj);
		}
		return errorObj;
	}
};